/**
 * File:
 *   check.ycp
 *
 * Module:
 *   Testsuite
 *
 * Summary:
 *   Testsuite check script.
 *
 * Authors:
 *   Michal Svec <msvec@suse.cz>
 *
 * $Id$
 */

{

include "./../src/testsuite.ycp";

map READ = $[ "read" : $[ "path" : "read_result" ] ];
map WRITE = $[ "write" : $[ "path" : true ] ];
map EXEC = $[ "execute" : $[ "path" : "execute_result" ] ];

//string DEFAULT = "default_string";

define string testfunc() ``{
    SCR::Dir(.read);
    SCR::Read(.read.path);
    SCR::Write(.write.path, "write_arg");
    SCR::Execute(.execute.path, "execute_arg");
    return "return_string";
}

TEST(``(testfunc()), [ READ, WRITE, EXEC ], nil); //DEFAULT);

y2error("error_string");

DUMP("");
DUMP(nil);

DUMP(731);
DUMP("dump_string");
DUMP("dump_string1\ndump_string2");
DUMPFILE("dump_file");
DUMPFILE("/dev/null");

DUMP("Pkg:: testing");
define string pkg_testfunc () ``{
    if (Pkg::IsProvided ("sendmail"))
    {
	return "sendmail";
    }
    else if (Pkg::IsProvided ("postfix"))
    {
	return "postfix";
    }
    else
    {
	return "none";
    }
}

import "Pkg";

// Pkg::FAKE (`IsProvided, true);
TEST(``(pkg_testfunc ()), [], nil);

//Pkg::FAKE (`IsProvided, false);
TEST(``(pkg_testfunc ()), [], nil);

//Pkg::FAKE (`IsProvided, $["sendmail": false, "postfix": true]);
TEST(``(pkg_testfunc ()), [], nil);

}
